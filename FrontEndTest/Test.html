<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Management</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        input, button {
            display: block;
            margin: 10px 0;
            padding: 10px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Product Management</h1>
        <div>
            <h2>Add Product</h2>
            <input type="text" id="name" placeholder="Name">
            <input type="number" id="price" placeholder="Price">
            <input type="text" id="description" placeholder="Description">
            <input type="text" id="vendor" placeholder="Vendor">
            <input type="number" id="quantity" placeholder="Quantity">
            <input type="text" id="category" placeholder="Category">
            <input type="date" id="arrival_date" placeholder="Arrival Date">
            <input type="date" id="selling_date" placeholder="Selling Date">
            <input type="number" id="cost" placeholder="Cost">
            <button onclick="addProduct()">Add Product</button>
        </div>
        <div>
            <h2>Get All Products</h2>
            <button onclick="getAllProducts()">Get All Products</button>
            <div id="products"></div>
        </div>
        <div>
            <h2>Get Product By Name</h2>
            <input type="text" id="productName" placeholder="Product Name">
            <button onclick="getProductByName()">Get Product</button>
            <div id="productByName"></div>
        </div>
        <div>
            <h2>Update Product</h2>
            <input type="number" id="updateId" placeholder="Product ID">
            <input type="text" id="updateName" placeholder="Name">
            <input type="number" id="updatePrice" placeholder="Price">
            <input type="text" id="updateDescription" placeholder="Description">
            <input type="text" id="updateVendor" placeholder="Vendor">
            <input type="number" id="updateQuantity" placeholder="Quantity">
            <input type="text" id="updateCategory" placeholder="Category">
            <input type="date" id="updateArrivalDate" placeholder="Arrival Date">
            <input type="date" id="updateSellingDate" placeholder="Selling Date">
            <input type="number" id="updateCost" placeholder="Cost">
            <button onclick="updateProduct()">Update Product</button>
        </div>
        <div>
            <h2>Delete Product</h2>
            <input type="number" id="deleteId" placeholder="Product ID">
            <button onclick="deleteProduct()">Delete Product</button>
        </div>
    </div>

    <script>
        const apiUrl = 'http://localhost:5000/api/v1/product';

        async function addProduct() {
            const name = document.getElementById('name').value;
            const price = document.getElementById('price').value;
            const description = document.getElementById('description').value;
            const vendor = document.getElementById('vendor').value;
            const quantity = document.getElementById('quantity').value;
            const category = document.getElementById('category').value;
            const arrival_date = document.getElementById('arrival_date').value;
            const selling_date = document.getElementById('selling_date').value;
            const cost = document.getElementById('cost').value;

            const response = await fetch(`${apiUrl}/add`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, price, description, vendor, quantity, category, arrival_date, selling_date, cost })
            });

            const result = await response.json();
            alert(result.message);
        }

        async function getAllProducts() {
            const response = await fetch(`${apiUrl}/getall`);
            const result = await response.json();

            const productsDiv = document.getElementById('products');
            productsDiv.innerHTML = JSON.stringify(result.data, null, 2);
        }

        async function getProductByName() {
            const name = document.getElementById('productName').value;
            const response = await fetch(`${apiUrl}/get/${name}`);
            const result = await response.json();

            const productByNameDiv = document.getElementById('productByName');
            productByNameDiv.innerHTML = JSON.stringify(result.data, null, 2);
        }

        async function updateProduct() {
            const id = document.getElementById('updateId').value;
            const name = document.getElementById('updateName').value;
            const price = document.getElementById('updatePrice').value;
            const description = document.getElementById('updateDescription').value;
            const vendor = document.getElementById('updateVendor').value;
            const quantity = document.getElementById('updateQuantity').value;
            const category = document.getElementById('updateCategory').value;
            const arrival_date = document.getElementById('updateArrivalDate').value;
            const selling_date = document.getElementById('updateSellingDate').value;
            const cost = document.getElementById('updateCost').value;

            const response = await fetch(`${apiUrl}/update/${id}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, price, description, vendor, quantity, category, arrival_date, selling_date, cost })
            });

            const result = await response.json();
            alert(result.message);
        }

        async function deleteProduct() {
            const id = document.getElementById('deleteId').value;
            const response = await fetch(`${apiUrl}/delete/${id}`, {
                method: 'DELETE',
                headers: { 'Content-Type': 'application/json' }
            });

            const result = await response.json();
            alert(result.message);
        }
    </script>
</body>
</html>
